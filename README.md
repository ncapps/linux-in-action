# Notes from Linux in Action by David Clinton
## Chapter 1. Welcome to Linux
- Linux basics:
  - the UNIX Filesystem Hierarchy Standard
  - Navigation - `ls pwd cd`
  - File management tools - `cat less touch mkdir rmdir rm cp mv`
  - Tricks - tab completion and file globbing
  - `sudo`
  - Where to find help - `man info journalctl`
- A file system uses an index to provide the appearance of an organized set of directories and files within a single disk division known as a *partition*
- All files in a disk partition are kept in directories between the root directory `/`
```
|--/           Root
|----/etc      Program configuration files
|----/var      Frequently changing content (i.e., log files)
|----/home     User account files
|----/sbin     System binary files
|----/bin      User binary files
|----/lib      Shared libraries
|----/usr      Third-party binaries
```
- The shell interprets the execution of user input commands
- *absolute path* is a path that begins with the root directory
- A pseudo file's contents are dynamically generated by the OS itself to represent specific values
- Linux uses pseudo file systems to expose data on the hardware environment to processes and users

**Key Terms**
- A *file system* is made up of data files indexed in a way that allows the perception of a directory-based organization
- A *process* is an active instance of a running software program
- A *disk partition* is the logical division of a physical storage device that can be made to work exactly like a standalone device. Partitions are common organizational tools for all modern operating systems
- *Bash* is a command-line user interface for executing system actions
- *Plain text* that is usable for administration purposes is text made up of a limited set of characters and contains no extraneous formatting code
- *File globbing* involves using wildcard characters to refer to multiple files with a single command
- *Tab completion* employs the Tab key to suggest possible completions of a partially typed command
- *Pseudo file systems* are directories containing files with dynamic data automatically generated at or after system boot

## Chapter 2. Linux Virtualization: Building a Linux working environment
- *Hypervisors* - Controls host system hardware providing each guest OS the resources it needs. Guest machines are run as system processes with virtualized access to hardware resources.
- *Containers* - Extremely lightweight virtual servers that share the underlying kernel of their host OS.
- *apt* - Advanced Package Tool
- The package manager fulfills the following responsibilities:
  - Maintains a local index to track repositories and their contents
  - Tracks the status of all the software that's installed on your local machine
  - Ensures that all available updates are applied to installed software
  - Ensures that software dependencies are met for new applications before they're installed
  - Handles installing and removing software packages
- The package manager type depends on the Linux distribution
- Run `arch` to check if the operating system is 64-bit or 32-bit
- It's always a good idea to update the repo information before installing new software
- A *dependency* is software that must already be installed on your computer for a new package to work
- Change password with `passwd`

**Summary**
- Hypervisors like VirtualBox provide an environment where virtual operating systems can safely access hardware resources, whereas lightweight containers share their hosts's software kernel
- Linux package managers like APT and RPM (Yum) oversee the installation and administration of software from curated online repositories using a regularly updated index that mirrors the state of the remote repository
- Getting a VM going in VirtualBox requires defining its virtual hardware environment, downloading an OS image, and installing the OS on your VM
- LXC containers are built on predefined, distribution-based templates
- LXC data is stored within the host file system, making it easy to administer containers

**Key Terms**
- *Virtualization* is the logical sharing of compute, storage, and networking resources among multiple processes, allowing each to run as if it was a standalone physical computer
- A *hypervisor* is software running on a host machine that exposes system rsources to a guest layer, allowing the launching and administration of full-stack guest VMs
- A *container* is a VM that shares the host machine's core OS kernal. Containers are fast and easy to launch and kill
- A *software repository* is a location where digital resources can be stored. Repositories are useful for collaboration and distribution of software packages

**Security Best Practices**
- It is preferred to use an official package manager to install and maintain software on your Linux system
- Always scan the checksum hashes of downloaded files against the correct hash strings, packages could be corrupted during download or switched by man-in-the-middle attackers

**Command Line Review**
- `apt install PACKAGE_NAME` installs a software package from a remote repository
- `dpkg -i PACKAGE_NAME` installs a downloaded Debian package on a Ubuntu machine
- `wget FILE_LOCATION` downloads a file
- `apt update` syncs the local software index with what's available from online repositories
- `shasum PACKAGE_NAME` calculates the checksum for a downloaded file
- `ip addr` displays information on each of a system's network interfaces

## Chapter 3. Remote connectivity: Safely accessing networked machines
- An *encryption key* is a small file containing a random sequence of characters
- The key can be applied as part of an encryption algorithm to convert plain-text, readable data into total gibberish
- Using the key on the encrypted version of the file converts the gibberish back to its original form
- The SSH network protocol enables secure communication by encrypting data packets before transmission and decrypting them at the other end
- You can for a process to automatically load on system startup using `systemctl enable PROCESS_NAME` or to not load on startup `systemctl disable PROCESS_NAME`
- Configuration files for most programs can be found in the `/etc/` directory
- An alternative to SSH password authentication is to create a special key pair and then copy the public half of the pair to the remote host
- Copy the public key to the host machine - `cat .ssh/id_rsa.pub ssh ubuntu@10.0.3.142 "cat >> .ssh/authorized_keys"`
- Specify which key pair to use for a session - `ssh -i .ssh/mykey.pem ubuntu@10.0.3.142`
- The SCP program copies files using the SSH protocol for file transfer
- Purpose-built program : `ssh-copy-id`
- *X11 forwarding* allows you to load a host machine-based program in the desktop of your client
- *Software* is programming code containing instructions to control computer hardware on behalf of human users
- A *Process* is an instance of a running software program
- An *operating system* is a tool for organizing and managing those instances/processes to effectively use a computer's hardware resources
- *init* is the first process to wake up and get everything else going when a Linux system boots
- `ps` displays information about active processes, The `-e` flag returns all the processes from all parent shells back up to init
- `pstree -p` visualizes the parent and child processes
- Nearly all Linux distributions use the same process manager: *systemd*. It's a replacement for `/sbin/init`
- The *d* stands for *daemon*, a background system process
- The `systemctl` command is a tool for process management

**Summary**
- Encrypted connections are a critical part of all networked communications. SSH is the industry standard.
- Enable password-free SSH acces by sharing the public key of a key pair
- The OpenSSH package also supports secure file copying and remote graphics
- Processed are managed by *systemd* through the `systemctl` tool for most modern Linux distributions
- Pipe data between commands using `|` and filter streaming data with `grep`

**Key Terms**
- A *password* is a string of regular characters. A *passphrase* can include spaces and punctuation
- *RSA* is a popular encryption algorithm
- *X11 forwarding* allows graphic programs to run over a remote connection
- A Linux *process* is all the ongoing activity that's associated with a single running program
- A *shell* is a terminal environment that provides a command-line interpreter to allow a user to execute commands
- A shell, for all intents and purposes, also a process. A *parent shell* is an initial environment where new child shells can be launched

**Security Best Practices**
- Always encrypt remote login sessions running over a public network
- Avoid relying on passwords alone
- Key-based, passwordess SSH sessions are preferable
- Never transfer files across public networks in plain text

**Command Line Review**
- `dpkg -s PACKAGE_NAME` - checks the status of an APT-based software package
- `systemctl status PROCESS_NAME` - checks the status of a system process
- `systemctl start PROCESS_NAME` - starts a service
- `ip addr` - lists all the network interfaces on a computer
- `ssh-keygen` - generates a new pair of SSH keys
- `cat .ssh/id_rsa.pub ssh ubuntu@10.0.3.142 "cat >> .ssh/authorized_keys"` - copies a local key to a remote machine
- `ssh-copy-id -i .ssh/id_rsa.pub ubuntu@10.0.3.142` - safely copies encryptions keys to a remote machine
- `ssh -i .ssh/mykey.pem ubuntu@10.0.3.142` - specifies a particular key pair
- `scp myfile ubuntu@10.0.3.142:/home/ubuntu/myfile` - safely copies a local file to a remote computer
- `ssh -X ubuntu@10.0.3.142` - allows you to log in to a remote host for a graphics-enabled session.
- `ps -ef | grep init` - displays all currently running system processes and filters results using the string init
- `pstree -p` - displays all currently running system processes in a visual tree format

## Attribution
Linux in Action by David Clinton, August 2018 - ISBN 9781617294938 